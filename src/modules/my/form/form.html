<template>
  <article class="slds-card">
    <div class="slds-card__body slds-card__body_inner">
      <header class="slds-m-vertical_medium">
        <div class="header-row">
          <h1 class="slds-text-heading_large">LWC Builder</h1>
          <a
            href="https://github.com/developerforce/lwc-builder"
            target="_blank"
          >
            <img src="/resources/gh-icon.png" class="gh-icon" />
          </a>
        </div>
        <h2>Configure and build Lightning Web Component files</h2>
      </header>
      <main>
        <div class="form-wrapper">
          <div class="slds-form-element slds-m-bottom_small">
            <label class="slds-form-element__label" for="component-name">
              <abbr class="slds-required" title="required">* </abbr>
              <span>Component Name</span>
            </label>
            <div class="slds-form-element__control">
              <input
                id="component-name"
                type="text"
                value={inputs.componentName}
                placeholder="sampleCompName1_23"
                name="componentName"
                onchange={onChangeInput}
                required=""
                class="slds-input"
              />
            </div>
          </div>
          <div class="slds-form-element slds-m-bottom_small">
            <label class="slds-form-element__label" for="api-version">
              <abbr class="slds-required" title="required">* </abbr>
              <span>API Version</span>
            </label>
            <div class="slds-form-element__control">
              <div class="slds-select_container">
                <select
                  class="slds-select"
                  id="api-version"
                  required=""
                  value={inputs.apiVersion}
                  name="apiVersion"
                  onchange={onChangeSelect}
                >
                  <option value="51.0">51.0 (Spring '21)</option>  
                  <option value="50.0">50.0 (Winter '21)</option>
                  <option value="49.0">49.0 (Summer '20)</option>
                  <option value="48.0">48.0 (Spring '20)</option>
                  <option value="47.0">47.0 (Winter '20)</option>
                </select>
              </div>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_small">
            <div class="slds-form-element__control">
              <div class="slds-checkbox">
                <input
                  type="checkbox"
                  name="isExposed"
                  id="is-exposed"
                  value={inputs.isExposed}
                  checked={inputs.isExposed}
                  onchange={onChangeCheckbox}
                />
                <label class="slds-checkbox__label" for="is-exposed">
                  <span class="slds-checkbox_faux"></span>
                  <span class="slds-form-element__label"
                    >Exposed</span
                  >
                </label>
              </div>
            </div>
          </div>

          <div class="slds-form-element slds-m-bottom_small">
            <label class="slds-form-element__label" for="master-label">
              <span>Master Label</span>
            </label>
            <div class="slds-form-element__control">
              <input
                id="master-label"
                type="text"
                value={inputs.primaryLabel}
                placeholder="Sample Comp Name 1 23"
                name="primaryLabel"
                onchange={onChangeInput}
                class="slds-input"
              />
            </div>
          </div>
          <div class="slds-form-element slds-m-bottom_small">
            <label class="slds-form-element__label" for="description">
              <span>Description</span>
            </label>
            <div class="slds-form-element__control">
              <input
                id="description"
                type="text"
                value={inputs.description}
                name="description"
                onchange={onChangeInput}
                class="slds-input"
              />
            </div>
          </div>

          <div class="slds-p-bottom_x-small">
            <label class="slds-form-element__label slds-m-bottom_x-small">
              <span>
                <span>Files </span>
                <i>[.js and .js-meta.xml are required]</i></span
              >
            </label>

            <div
              class="slds-grid slds-gutters slds-wrap slds-grid_vertical-flex-start"
            >
              <div
                class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_3-of-12 slds-m-bottom_x-small"
              >
                <div class="slds-form-element">
                  <div class="slds-form-element__control">
                    <div class="slds-checkbox">
                      <input
                        type="checkbox"
                        name="withHtml"
                        id="with-html"
                        value={inputs.withHtml}
                        checked={inputs.withHtml}
                        onchange={onChangeCheckbox}
                      />
                      <label class="slds-checkbox__label" for="with-html">
                        <span class="slds-checkbox_faux"></span>
                        <span class="slds-form-element__label">
                          HTML File
                        </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_3-of-12 slds-m-bottom_x-small"
              >
                <div class="slds-form-element">
                  <div class="slds-form-element__control">
                    <div class="slds-checkbox">
                      <input
                        type="checkbox"
                        name="withCss"
                        id="with-css"
                        value={inputs.withCss}
                        checked={inputs.withCss}
                        onchange={onChangeCheckbox}
                      />
                      <label class="slds-checkbox__label" for="with-css">
                        <span class="slds-checkbox_faux"></span>
                        <span class="slds-form-element__label">
                          CSS File
                        </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_3-of-12 slds-m-bottom_x-small"
              >
                <div
                  class="slds-grid slds-wrap slds-grid_vertical-align-center"
                >
                  <div class="slds-form-element">
                    <div class="slds-form-element__control">
                      <div class="slds-checkbox">
                        <input
                          type="checkbox"
                          name="withSvg"
                          id="with-svg"
                          value={inputs.withSvg}
                          checked={inputs.withSvg}
                          onchange={onChangeCheckbox}
                        />
                        <label class="slds-checkbox__label" for="with-svg">
                          <span class="slds-checkbox_faux"></span>
                          <span class="slds-form-element__label">
                            SVG File
                          </span>
                        </label>
                      </div>
                    </div>
                  </div>

                  <template if:true={inputs.withSvg}>
                    <my-svg-uploader
                      file-name={inputs.svgFileName}
                      file-content={inputs.svgFileContent}
                      onuploadsvg={handleSvgUpload}
                    ></my-svg-uploader>
                  </template>
                </div>
              </div>
              <div
                class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_3-of-12 slds-m-bottom_x-small"
              >
                <div class="slds-form-element">
                  <div class="slds-form-element__control">
                    <div class="slds-checkbox">
                      <input
                        type="checkbox"
                        name="withTest"
                        id="with-test"
                        value={inputs.withTest}
                        checked={inputs.withTest}
                        onchange={onChangeCheckbox}
                      />
                      <label class="slds-checkbox__label" for="with-test">
                        <span class="slds-checkbox_faux"></span>
                        <span class="slds-form-element__label">
                          Test File
                        </span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="slds-p-bottom_small target-section">
            <label class="slds-form-element__label">
              <span
                >Where to use the Component?</span
              >
            </label>

            <div class="slds-grid slds-gutters slds-wrap">
              <template for:each={targetsArr} for:item="target">
                <div
                  key={target.value}
                  class="slds-col slds-size_1-of-1 slds-medium-size_1-of-2 slds-large-size_1-of-2"
                >
                  <div class="slds-form-element">
                    <div class="slds-form-element__control">
                      <my-target-definition
                        target={target}
                        onchangetarget={onChangeTargetValue}
                      ></my-target-definition>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </div>
      </main>
    </div>
  </article>

  <template if:true={hasPropertyTarget}>
    <article class="slds-card">
      <div class="slds-card__body slds-card__body_inner">
        <div>
          <h4>Properties</h4>
          <div>
            <ul>
              <template for:each={inputs.propertyIds} for:item="pId">
                <li key={pId}>
                  <my-property-definition
                    pid={pId}
                    targets={inputs.targets}
                    onchangepropdef={onChangePropertyRow}
                    ondeletepropdef={deletePropertyRow}
                  ></my-property-definition>
                </li>
              </template>
            </ul>
          </div>
          <div>
            <button
              name="addPropertyRow"
              class="slds-button slds-button_neutral slds-button_stretch"
              onclick={addPropertyRow}
              type="button"
            >
              <svg
                class="slds-button__icon slds-button__icon_left"
                aria-hidden="true"
              >
                <use
                  xlink:href="/resources/slds/icons/utility-sprite/svg/symbols.svg#add"
                ></use>
              </svg>
              <span>Add Property</span>
            </button>
          </div>
        </div>
      </div>
    </article>
    <template if:true={isRecordPageSelected}>
      <article class="slds-card">
        <div class="slds-card__body slds-card__body_inner">
          <div>
            <h4>
              sObject API Names (RecordPage only)
            </h4>
            <ul>
              <template for:each={inputs.objectIds} for:item="oId">
                <li key={oId}>
                  <my-sobject-definition
                    oid={oId}
                    onchangesobj={onChangeObjectRow}
                    ondeletesobj={deleteObjectRow}
                  ></my-sobject-definition>
                </li>
              </template>
            </ul>
            <div>
              <button
                name="addObjectRow"
                class="slds-button slds-button_neutral slds-button_stretch"
                onclick={addObjectRow}
                type="button"
              >
                <svg
                  class="slds-button__icon slds-button__icon_left"
                  aria-hidden="true"
                >
                  <use
                    xlink:href="/resources/slds/icons/utility-sprite/svg/symbols.svg#add"
                  ></use>
                </svg>
                <span>Add sObject</span>
              </button>
            </div>
          </div>
        </div>
      </article>
    </template>

    <template if:true={isFlowOnly}>
      <article class="slds-card">
        <div class="slds-card__body slds-card__body_inner">
          <div class="slds-form-element slds-m-bottom_small">
            <label class="slds-form-element__label" for="configuration-editor">
              <span
                >Custom Property Editor Name (Flow Builder)</span
              >
              <!-- https://developer.salesforce.com/docs/component-library/documentation/en/lwc/lwc.use_flow_custom_property_editor -->
            </label>
            <div class="slds-form-element__control">
              <input
                id="configuration-editor"
                type="text"
                value={inputs.configurationEditor}
                placeholder="c-my-config-editor-comp"
                name="configurationEditor"
                onchange={onChangeInput}
                class="slds-input"
              />
            </div>
          </div>
        </div>
      </article>
    </template>
  </template>
</template>
